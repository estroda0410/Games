define("sudoku-game/model/settings-model",["underscore/nyt","foundation/models/base-model","foundation/models/page-storage"],function(a,b,c){var d=b.extend({key:"nyt-sudoku-settings",initialize:function(){this.on("change",this.persist),this.set(c.get(this.key)),this.subscribe("reset:puzzle",this.setInitialState)},defaults:{automaticCandidates:null,checkOnGuess:!1,defaultAutomatic:!1,defaultDifficulty:"easy",highlightConflicts:!0,inCandidateMode:null,lightenComplete:!0,showClock:!0,soundOn:!0},setInitialState:function(){var b=this.unset("automaticCandidates");a.defer(function(){b.set({automaticCandidates:b.is("defaultAutomatic"),inCandidateMode:!1})})},enterCandidateMode:function(){return this.is("inCandidateMode")||(this.revertOnKeyup=!0),this.set("inCandidateMode",!0)},exitCandidateMode:function(){return this.revertOnKeyup?(delete this.revertOnKeyup,this.set("inCandidateMode",!1)):this},persist:function(){c.set(this.key,this.toJSON())}});return new d}),define("sudoku-game/model/candidate-model",["underscore/nyt","foundation/models/base-model"],function(a,b){return b.extend({initialize:function(){this.on("change:contradictionCount",function(a,b){this.set("available",0===b)})}})}),define("sudoku-game/collection/candidates-collection",["underscore/nyt","foundation/collections/base-collection","sudoku-game/model/candidate-model"],function(a,b,c){"use strict";return b.extend({model:c,initialize:function(){for(var a=0;a<=9;a++)this.add(new c({value:a}))},toggle:function(a){a&&this.at(a).toggle("available")},clear:function(){this.invoke("set","available",!1),this.invoke("unset","contradictionCount")},updateAll:function(a){this.each(function(b,c){var d=a[c]||0;b.set({contradictionCount:d,available:0===d})})},incrementContradictionCount:function(a){a&&this.at(a).increment("contradictionCount")},decrementContradictionCount:function(a){a&&this.at(a).decrement("contradictionCount")}})}),define("sudoku-game/model/square-model",["underscore/nyt","foundation/models/base-model","sudoku-game/model/settings-model","sudoku-game/collection/candidates-collection"],function(a,b,c,d){return b.extend({initialize:function(){if(!this.is("immutable"))return this.subscribe("reset:puzzle",this.reset),this.subscribe("check:puzzle",this.check),this.subscribe("reveal:puzzle",this.reveal),this.listenTo(c,"change:automaticCandidates",this.toggleAutomation),this.listenTo(this,"change:guess",this.checkGuessAgainstNeighborsAndOrSolution),this.set("candidates",new d)},updateCandidates:function(a,b){var c=a.previous("guess"),d=this.get("candidates");return d.incrementContradictionCount(b),d.decrementContradictionCount(c),this},checkGuessAgainstNeighborsAndOrSolution:function(a,b){this.checkAgainstNeighborValues(a,b),c.is("checkOnGuess")&&this.check()},checkAgainstNeighborValues:function(b,c){var d=b.previous("guess"),e=b.neighbors.where({guess:d}),f=b.neighbors.where({guess:c});return d&&e.length&&(a.each(e,function(a){a.decrement("matchingNeighborCount")}),b.set("matchingNeighborCount",b.get("matchingNeighborCount")-e.length)),c&&f.length&&(a.each(f,function(a){a.increment("matchingNeighborCount")}),b.set("matchingNeighborCount",b.get("matchingNeighborCount")+f.length)),this},activate:function(){return this.is("immutable")||(this.subscribe("check:square",this.check),this.subscribe("reveal:square",this.reveal)),this.set("active",!0)},deactivate:function(){return this.is("immutable")||(this.stopSubscribing("check:square"),this.stopSubscribing("reveal:square")),this.set("active",!1)},update:function(a){return this.is("immutable")||this.is("confirmed")?this:c.is("inCandidateMode")?(this.set("guess",null),this.get("candidates").toggle(a)):this.set({modified:this.is("checked"),guess:a})},toggleCandidate:function(a){this.get("candidates").toggle(Number(a))},toggleAutomation:function(a,b){var c=this,d=b?"listenTo":"stopListening";c.neighbors.each(function(a){a.is("immutable")||a[d](c,"change:guess",a.updateCandidates)}),b?this.adjustCandidatesToBoardState():this.get("candidates").clear()},adjustCandidatesToBoardState:function(){var a=this.neighbors.countBy(function(a){return a.get("guess")});this.get("candidates").updateAll(a)},swapWith:function(a){return this.get("candidates").each(function(b,c){b.set(a.candidates[c])}),delete a.candidates,this.set(a)},clear:function(){return this.is("confirmed")?this:this.get("guess")||c.get("automaticCandidates")?this.update(null):this.get("candidates").clear()},reveal:function(a){if(!this.is("confirmed")&&("square"!==a||this.is("active"))){var b=this.isCorrect();return this.set({confirmed:!0,checked:this.is("checked")&&b,revealed:!b}),b||this.set("guess",this.get("solution")),this}},check:function(a){if(!this.is("confirmed")&&!this.isBlank()&&("square"!==a||this.is("active"))){var b=this.isCorrect();return this.set({confirmed:b,checked:!b||this.is("checked"),modified:!1})}},reset:function(){return this.get("candidates").clear(),this.set({revealed:!1,checked:!1,confirmed:!1,modified:!1,guess:null})},isBlank:function(){return!this.get("guess")},wasBlank:function(){return!this.previous("guess")},isCorrect:function(){return this.get("solution")===this.get("guess")},wasCorrect:function(){return this.get("solution")===this.previous("guess")},toJSON:function(){var b=a.clone(this.attributes);return b.immutable?b:(b.candidates=b.candidates.toJSON(),delete b.active,b)}})}),define("sudoku-game/collection/grid-collection",["underscore/nyt","foundation/collections/base-collection","sudoku-game/model/square-model"],function(a,b,c){"use strict";return b.extend({model:c,activeSquare:null,totals:[0,0,0,0,0,0,0,0,0,0],initialize:function(){var a=this;this.on("change:guess",function(b,c){a.decrementNumberCount(b.previous("guess")),a.incrementNumberCount(c)}),this.subscribe("show:hint",this.findSolvableSquare)},incrementNumberCount:function(a){a&&(this.totals[a]++,this.totals[a]>=9&&this.broadcast("change:all-filled",a,!0))},decrementNumberCount:function(a){a&&(this.totals[a]--,this.totals[a]<9&&this.broadcast("change:all-filled",a,!1))},findAdjacentSquare:function(a,b,c){return this.findWhere({row:a.get("row")+b,column:a.get("column")+c})},findSolvableSquare:function(){for(var a,b=0;b<this.hints.length;b++)if(a=this.at(this.hints[b]),!a.isCorrect())return a.isBlank()||a.check(),this.activateSquare(a)},tryToMove:function(a,b){var c=this.findAdjacentSquare(this.activeSquare,a,b);return c&&this.activateSquare(c),this},findNeighborSquares:function(a){var c=this.filter(function(b){var c=b.get("row")===a.get("row"),d=b.get("column")===a.get("column"),e=b.get("box")===a.get("box"),f=b!==a;return f&&(c||d||e)});return new b(c)},findSquareAtCoordinates:function(a,b){return this.findWhere({row:a,column:b})},activateFirstSquare:function(){return this.each(a.bind(function(a){this.incrementNumberCount(a.get("guess"))},this)),this.activateSquare(this.at(0)),this},activateSquare:function(a){return this.activeSquare&&this.activeSquare.deactivate(),this.activeSquare=a.activate(),this},activateSquareAtIndex:function(a){return this.activateSquare(this.at(a))}})}),define("sudoku-game/model/timer-model",["underscore/nyt","foundation/models/base-model"],function(a,b){var c=b.extend({initialize:function(){this.subscribe("reset:puzzle",this.reset)},start:function(){this.isPaused()?this.set("interval",window.setInterval(a.bind(this.tick,this),1e3)):window.console.error("Timer already started!")},reset:function(){this.pause(),this.set("seconds",0),this.start()},pause:function(){this.set("interval",window.clearInterval(this.get("interval")))},isPaused:function(){return!this.has("interval")},tick:function(){this.increment("seconds")}});return new c}),define("sudoku-game/model/puzzle-model",["underscore/nyt","jquery/nyt","foundation/models/page-storage","foundation/models/base-model","sudoku-game/collection/grid-collection","sudoku-game/model/timer-model"],function(a,b,c,d,e,f){"use strict";return d.extend({initialize:function(){this.on("change:incorrectCount",function(a,b){this.set("solved",0===b)}),this.grid=this.hydrateGrid(this.get("grid")),this.grid.hints=this.get("hints"),this.unset("grid"),f.set({timeAtStart:this.get("timeElapsed"),pausedAtStart:this.is("solved")}),this.listenTo(f,"change:seconds",function(a,b){this.set("timeElapsed",b)}),b(window).on("beforeunload",a.bind(function(){this.freezeDry()},this))},defaults:{inputMode:"fill"},hydrateGrid:function(a){var b=this,c=new e(a),d=0,f=0;return c.each(function(a){a.neighbors=c.findNeighborSquares(a),a.is("immutable")||(b.listenTo(a,"change:guess",b.updateIncorrectCount),b.listenTo(a,"change:guess",b.updateBlankCount),a.isCorrect()||d++,a.isBlank()&&f++)}),b.set("incorrectCount",d),b.set("blankCount",f),c},freezeDry:function(){var a=this.toJSON();return c.pack("nyt-sudoku-"+a.difficulty,a),this},toJSON:function(){var b=a.clone(this.attributes);return b.grid=this.grid.toJSON(),b},updateIncorrectCount:function(a){a.isCorrect()!==a.wasCorrect()&&(a.isCorrect()?this.decrement("incorrectCount"):this.increment("incorrectCount"))},updateBlankCount:function(a){a.isBlank()!==a.wasBlank()&&(a.isBlank()?this.increment("blankCount"):this.decrement("blankCount"))}})}),define("sudoku-game/util/data-adaptor",["underscore/nyt","foundation/models/page-storage"],function(a,b){return{adapt:function(c){var d=this;a.each(c,function(c,e){var f=c.puzzle_data,g=f.puzzle,h=f.solution,i=c.puzzle_id,j=c.difficulty.toLowerCase(),k=b.unpack("nyt-sudoku-"+j)||{};return k.id===c.puzzle_id?void(d[e]=k):void(d[e]={id:i,difficulty:j,publicationDate:c.print_date.replace(/-/g,"/"),incorrectCount:0,timeElapsed:0,hints:f.hints,grid:a.map(h,function(a,b){var c=!g[b];return{matchingNeighborCount:0,solution:a,guess:c?"":a,immutable:!c,index:b,row:Math.floor(b/9),column:b%9,box:3*Math.floor(b/27)+Math.floor(b%9/3)}})})})}}}),define("sudoku-game/template/compiled",["underscore/nyt"],function(_){return{congratsModal:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<div class='modal-body congratulations'><div class='modal-close' title='Press Esc to Close'><i class='icon-web_icons_close'></i><span class='visually-hidden'></span></div><div class='complete-image'></div><h2>Congratulations!</h2> ",__p+=isPromo?" <div>You solved the puzzle"+(null==(__t=useIn)?"":__t)+"<span>"+(null==(__t=time)?"":__t)+"</span>.</div> ":" <div>You solved a <span>"+(null==(__t=day)?"":__t)+"</span> puzzle"+(null==(__t=useIn)?"":__t)+"<span>"+(null==(__t=time)?"":__t)+"</span>.</div><div class=\"buttonsContainer clearfix\"><button class='review-button'>Review Puzzle</button><button onclick=\"window.location='/crosswords/index.html';\" class='ok-button'>HOME</button></div> ",__p+="</div><div class='modal-underlay congrats-underlay'></div>";return __p},contextMenu:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<ul><li data-action="check" data-scope="letter" >Check Letter</li><li data-action="check" data-scope="word" >Check Word</li><hr /><li data-action="reveal" data-scope="letter" >Reveal Letter</li><li data-action="reveal" data-scope="word" >Reveal Word</li><hr /><li data-action="erase" data-scope="partial" >Clear Partial</li><li data-action="erase" data-scope="word" >Clear Word</li></ul>';return __p},error:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<div class='load-failure'><h2>Sorry</h2><p>There was a problem loading the puzzle.</p><button onclick='window.location.reload();'>Retry</button></div>";return __p},filledGridModal:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<div class='modal-body filled-modal'><h5>Almost There!</h5><div class='inset'>You’ve filled the puzzle but have at least one error. Keep trying.</div><button class='ok-button' title='Close with Enter or Esc'>OK</button></div><div class='modal-underlay'></div>";return __p},header:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="back-button" class="gray-stroked"><a href="/crosswords/index.html"><span><</span> Crossword</a></div><div class="header-buttons"> ',acrossLiteLink&&(__p+=' <button class="across-lite" onclick="window.open(\''+(null==(__t=acrossLiteLink)?"":__t)+'\')"><span>Across Lite </span><i class="icon-web_icons_across_lite"></i></button> '),__p+=" ",__p+=isAcrostic?' <button class="print-puzzle grid"><span>Print Grid </span><i class="icon-web_icons_print"></i></button><button class="print-puzzle clues" title=\'Large print clues are best printed in landscape mode\'><span>Print Large Clues </span><i class="icon-web_icons_print"></i></button> ':' <button class="print-puzzle"><span>Print </span><i class="icon-web_icons_print"></i></button> ',__p+='</div><h1 class="game-heading"> '+(null==(__t=pubDate)?"":__t)+" ",(window.NYT_DBGS||/internal\.games/.test(location.hostname))&&(__p+=" <button onclick=\"window.open('"+(null==(__t=editLink)?"":__t)+"');\">Edit #"+(null==(__t=id)?"":__t)+"</button><button onclick=\"window.open('"+(null==(__t=xwiLink)?"":__t)+'\');">See on XWI</button><button id="fill-it-in">Solve</button> '),window.NYT_DBGS&&!isAcrostic&&(__p+=' <button id="test-sync" type="button">Save to server now</button><label><input type="checkbox" id="force-failure" />Force server failure</label><label><input type="checkbox" id="force-eligible" />Force eligibility</label><span id="square-index"></span> '),__p+="</h1>",""!==title&&(__p+=' <div class="title"> '+(null==(__t=title)?"":__t)+" </div>"),__p+='<div class="game-credit"> By <span class="author">'+(null==(__t=author)?"":__t)+"</span>"+(null==(__t=editor)?"":__t)+'</div><div class="notes"></div>';return __p},noSupport:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<div class='load-failure'><h2>Unsupported Browser</h2><p></p><p>Sorry, this version of the puzzle uses modern Web technologies that are not offered by your browser. <br>We support the following browsers, and invite you to try one out and come back here.</p><ul><li><a href='http://www.google.com/chrome'>Google Chrome</a></li><li><a href='http://www.mozilla.com/firefox'>Mozilla Firefox</a></li><li><a href='http://www.apple.com/safari'>Apple Safari</a></li><li><a href='http://www.microsoft.com/ie'>Internet Explorer 9+</a></li></ul></div>";return __p},pauseModal:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<div class='modal-body pause-modal'><div class='inset'> Your game has been paused. </div><button>Resume</button></div><div class='modal-underlay pause-underlay'></div>";return __p},registerModal:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class=\'load-failure\'><h2>Subscription Required</h2><p>Your account does not have full access to premium crosswords. Click <a href="http://www.nytimes.com/subscriptions/games/lp3FUQQ.html">here</a> to subscribe.<br>Already a subscriber? Click <a href="https://myaccount.nytimes.com/auth/login?URI='+(null==(__t=window.location.href)?"":__t)+'">here</a> to login.</p><p><a href="http://www.nytimes.com/content/help/games/crosswords/crosswords.html#subscription">Click here to learn more</a></p><p><a href="http://www.nytimes.com/crosswords">Return to the main Crossword page.</a></p></div>';return __p},timer:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<span id='timer'><span class='timer-count'>0:00:00</span><span class='pause-button'><i class=\"icon-web_icons_pause\"></i></span></span>";return __p},toolbar:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<button id='solving-settings'><i class=\"icon-settings-gear\"></i></button>",isAcrostic&&(__p+="<button id='show-grid-toggle' class='grid-toggle'><span class='button-text'>See</span></button>"),__p+="<div id='timer-container'></div><button class='pencil-mode-toggle'><i class=\"icon-pencil-mode\"></i></button><div class='toolbar-menu-wrapper'><button class='clear-menu' data-action='Clear'></button><ul data-action='erase' class='toolbar-menu'> ",__p+=isAcrostic?" <li data-scope='letter'><span>Square</span></li> ":" <li data-scope='partial' title='Won’t clear letters that are part of completed words'><span>Partial</span></li> ",__p+=" <li data-scope='word'><span>Word</span></li><li data-scope='puzzle'><span>Puzzle</span></li><li data-scope='all' data-disqualifier='Resetting the timer'><span>Puzzle & Timer</span></li></ul></div><div class='toolbar-menu-wrapper'><button class='reveal-menu disable-when-locked hide-on-solve' data-action='Reveal' data-disqualifier='Using Reveal'></button><ul data-action='reveal' class='toolbar-menu'><li data-scope='letter'><span>Square</span></li><li data-scope='word'><span>Word</span></li><li data-scope='puzzle'><span>Puzzle</span></li> ",window.NYT_DBGS&&(__p+="<li data-scope='most'><span>All But Current</span></li>"),__p+=" </ul></div><div class='toolbar-menu-wrapper'><button class='check-menu disable-when-locked hide-on-solve' data-action='Check' data-disqualifier='Using Check'></button><ul data-action='check' class='toolbar-menu'><li data-scope='letter'><span>Square</span></li><li data-scope='word'><span>Word</span></li><li data-scope='puzzle'><span>Puzzle</span></li></ul></div><button id='review-mode-toggle' class='show-on-solve'> Illustration</button><div class='toolbar-separator'></div>";return __p},cColumn:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="MiddleRight" class="ad middle-right"></div><div class="section clearfix"><header>Other puzzles</header><ul class="other-puzzles"><li><a target="_self" href="/crosswords/index.html?ref=sudoku" alt="Crossword" title="Crossword">Crossword<i class="icon-crossword-game"></i></a></li><li><a target="_self" href="/crosswords/game/set" alt="Set" title="Set">Set&reg;<i class="icon-set-game"></i></a></li><li><a target="_self" href="/ref/crosswords/kenken.html?ref=sudoku" alt="Kenken" title="Kenken">Kenken&reg;<i class="icon-kenken-game"></i></a></li></ul></div><div id="Middle5" class="ad middle-5"></div><div class="section feedback"><header>Feedback</header><div class="description"> Have a problem? Let us know. <ul class="list"><li><a target="_blank" alt="Send feedback" title="Send feedback" href="mailto:NYTCrossword@nytimes.com?subject=Sudoku%20Feedback&body='+(null==(__t=emailBody)?"":__t)+'">Send feedback</a></li></ul></div></div>';return __p},congratsModal:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<div class='modal-padder'><div class='complete-image'><i class='icon-circle-star'></i></div><div class='large-title'>Congratulations!</div><div>You solved today’s <span class='capitalize bold'>"+(null==(__t=difficulty)?"":__t)+"</span> puzzle"+(null==(__t=useIn)?"":__t)+"<strong>"+(null==(__t=time)?"":__t)+"</strong>.</div></div>";return __p},header:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<h3 class='kicker'><span class='kicker-label'><a href='/crosswords/index.html'>Crossword</a></span><span class='pipe'>|</span><span class='game'>Sudoku</span></h3><div class='header-buttons'><button class='instructions'><a href='#how-to-play'><span>How to Play</span></a></button><button class='print-puzzle'><span>Print </span><i class='icon-print'></i></button></div><h1 class='print-title capitalize'>Sudoku &mdash; "+(null==(__t=difficulty)?"":__t)+"</h1><img src='http://a1.nyt.com/assets/shell/20141211-103119/images/foundation/logos/nyt-logo-185x26.svg' /><h2 class='date'><span class='day-of-week'>"+(null==(__t=dayOfWeek)?"":__t)+"</span> "+(null==(__t=pubDate)?"":__t)+" ",window.NYT_DBGS&&(__p+=" <button id='fill-it-in'>Solve</button> "),__p+="</h2><ul class='tab-container clearfix'> ",_.each(["easy","medium","hard"],function(a,b){__p+=" <li class=' ",a===difficulty&&(__p+=" active "),__p+=" ",puzzles[a].solved&&(__p+=" solved "),__p+=" '><i class='icon-check-sharp'></i><a class='capitalize' data-difficulty='"+(null==(__t=a)?"":__t)+"' href='/crosswords/game/sudoku/"+(null==(__t=a)?"":__t)+"'></a></li> "}),__p+="</ul>";return __p},settingsModal:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<div class='modal-padder'><div class='settings-block'><h6>Settings</h6><div class='inset'><label><input type='checkbox' name='checkOnGuess' ",checkOnGuess&&(__p+=" checked "),__p+=" /><span>Check guesses when entered</span></label><label><input type='checkbox' name='defaultAutomatic' ",defaultAutomatic&&(__p+=" checked "),__p+=" /><span>Start in automatic mode</span></label><label><input type='checkbox' name='lightenComplete' ",lightenComplete&&(__p+=" checked "),__p+=" /><span>Lighten completed numbers</span></label><label><input type='checkbox' name='highlightConflicts' ",highlightConflicts&&(__p+=" checked "),__p+=" /><span>Highlight conflicts</span></label><label><input type='checkbox' name='soundOn' ",soundOn&&(__p+=" checked "),__p+=" /><span>Play sound on solve</span></label><label><input type='checkbox' name='showClock' ",showClock&&(__p+=" checked "),__p+=" /><span>Show clock</span></label></div></div><div class='settings-block'><h6>Default Difficulty</h6><div class='inset'> ",_.each(["easy","medium","hard"],function(a){__p+=" <label><input type='radio' name='defaultDifficulty' value='"+(null==(__t=a)?"":__t)+"' ",defaultDifficulty===a&&(__p+=" checked "),__p+=" /><span class='capitalize'>"+(null==(__t=a)?"":__t)+"</span></label> "}),__p+=" </div></div><div class='button-container top-bordered'><button id='restore-defaults' class='minor-button'>Restore Defaults</button></div></div>";return __p},square:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<div class='cell-wrapper' data-index='"+(null==(__t=index)?"":__t)+"'><div class='guess'>"+(null==(__t=guess)?"":__t)+"</div> ",immutable||(__p+=" <div class='cheat-flag'></div><table class='candidates'></table> "),__p+="</div>";return __p},timer:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<button id='timer'",disableTimer&&(__p+=" disabled "),__p+="",hide&&(__p+=" class='invisible' "),__p+="><span class='timer-count'>0:00:00</span><span class='pause-button'><i class=\"icon-pause\"></i></span></button>";return __p},toolbar:function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<button id='solving-settings' class='toolbar-button'><i class=\"icon-settings-gear-old\"></i><!-- <span class='exciting' style='position:absolute;top:10px;left:0;'>Updated</span> --></button><div id='timer-container'></div><div class='all-modes-container hide-on-solve'><div class='manual-modes-container'><input type='radio' name='active-mode' id='fill-mode' value='fill' checked /><label for='fill-mode' title='Fill Mode'><i class=\"icon-sudoku-fill-mode\"></i></label><input type='radio' name='active-mode' id='candidate-mode' value='candidate' /><label for='candidate-mode' title='Candidate Mode'><i class=\"icon-sudoku-candidate-mode\"></i></label></div><input type='checkbox' id='automatic-candidates' /><label for='automatic-candidates' title='Automatic Mode' class='bordered'> Auto </label></div><div class='toolbar-menu-wrapper right-align'><button class='action-menu toolbar-button hide-on-solve'><i class=\"icon-life-preserver\"></i></button><ul class='toolbar-menu'><li data-action='check' data-scope='square'><span>Check Square</span></li><li data-action='check' data-scope='puzzle'><span>Check Puzzle</span></li><li data-action='reveal' data-scope='square'><span>Reveal Square</span></li><li data-action='reveal' data-scope='puzzle'><span>Reveal Puzzle</span></li><li data-action='reset' data-scope='puzzle'><span>Reset Puzzle</span></li></ul></div><button id='hint-trigger' class='toolbar-button hint bordered right-align'><span class='button-text'></span></button>";return __p}}}),define("sudoku-game/view/header-view",["underscore/nyt","jquery/nyt","sudoku-game/util/data-adaptor","foundation/views/base-view","sudoku-game/template/compiled"],function(a,b,c,d,e){"use strict";return d.extend({tagName:"header",className:"game-header",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],initialize:function(a){this.puzzles=a.puzzles,this.subscribe("change:solved",this.toggleSolvedMarker)},render:function(){var a=new Date(this.model.get("publicationDate")),b=this.dateHelper.getMonthName(a.getMonth())+" "+a.getDate()+", "+a.getFullYear();return this.$el.html(e.header({pubDate:b,dayOfWeek:this.days[a.getDay()],id:this.model.id,difficulty:this.model.get("difficulty"),puzzles:c})),this},events:{"click #fill-it-in":function(){var a=this.model.grid.activeSquare;a.collection.each(function(b){b===a||b.is("immutable")||b.set("guess",b.get("solution"))})},"click button.print-puzzle":function(){window.print()},"click .tab-container li.active a":function(a){a.preventDefault()}},toggleSolvedMarker:function(a){this.$("li.active").toggleClass("solved",a)}})}),define("sudoku-game/view/timer-view",["underscore/nyt","jquery/nyt","sudoku-game/model/timer-model","sudoku-game/model/settings-model","foundation/views/base-view","sudoku-game/template/compiled"],function(a,b,c,d,e,f){"use strict";return e.extend({initialize:function(a){this.listenTo(c,{"change:interval":this.toggleClockState,"change:seconds":this.updateClock}),this.listenTo(d,"change:showClock",this.toggleClockVisibility),this.subscribe("change:solved",this.toggleClockLock)},render:function(){var a=c.get("pausedAtStart");return this.$el.html(f.timer({disableTimer:a,hide:!d.is("showClock")})),this.$clock=this.$(".timer-count"),c.set("seconds",c.get("timeAtStart")),a||c.start(),this},events:{"click #timer":"toggleTimer"},toggleTimer:function(){var a=c.isPaused()?"start":"pause";return c[a](),this},toggleClockState:function(a,b){this.$(".icon-pause").toggleClass("icon-play",!b)},toggleClockVisibility:function(a,b){this.$("#timer").toggleClass("invisible",!b)},toggleClockLock:function(a){this.$("#timer").prop("disabled",a),a&&c.pause()},updateClock:function(a,b){this.$clock.html(this.formatTime(b))},formatTime:function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=c<10?"0"+c:c,e=a%60,f=e<10?"0"+e:e;return[b,d,f].join(":")}})}),define("sudoku-game/view/settings-modal-view",["underscore/nyt","foundation/views/base-view","shared/modal/views/modal","sudoku-game/model/settings-model","sudoku-game/template/compiled"],function(a,b,c,d,e){"use strict";return b.extend({initialize:function(){this.modal=new c({hasCloseButton:!0,hasOverlay:!0,id:"settings-modal",tailDirection:"fixed",modalContent:e.settingsModal(d.attributes)}),this.modal.addToPage(),this.render()},render:function(){return this.modal.addToPage(),this.setElement(this.modal.$modal)},events:{"change input":"updateSetting","click #restore-defaults":"restoreDefaults"},updateSetting:function(a){var b=a.target,c="checkbox"===b.type,e=c?b.checked:b.value;d.set(b.name,e),"checkOnGuess"===b.name&&e&&this.broadcast("check:puzzle")},restoreDefaults:function(){var b=this,c={};a.each(d.defaults,function(a,e){d.get(e)!==a&&(c[e]=a,"boolean"==typeof a?b.$("[name="+e+"]").prop("checked",a):b.$("[name="+e+"][value="+a+"]").prop("checked",!0))}),d.set(c)}})}),define("sudoku-game/view/toolbar-view",["underscore/nyt","jquery/nyt","foundation/views/base-view","sudoku-game/view/timer-view","sudoku-game/view/settings-modal-view","sudoku-game/model/settings-model","sudoku-game/template/compiled"],function(a,b,c,d,e,f,g){"use strict";return c.extend({className:"game-toolbar",initialize:function(a){this.settingsModal=new e,this.listenTo(f,{"change:inCandidateMode":this.toggleInputMode,"change:automaticCandidates":this.toggleAutoMode})},render:function(){return this.$el.html(g.toolbar(f.attributes)),new d({el:this.$("#timer-container")[0]}).render(),this.$menus=this.$(".toolbar-menu"),this},events:{"click .toolbar-menu-wrapper button":function(a){var c=this;this.hideAllMenus(),b(a.currentTarget).next().addClass("active"),b("body").one("click",function(){c.hideAllMenus()}),a.stopPropagation()},"click li":function(a){var c=b(a.currentTarget),d=c.data("action"),e=c.data("scope");("reset"!==d||window.confirm("Are you sure you want to reset the puzzle?"))&&("puzzle"!==e||"reveal"!==d||window.confirm("Are you sure you want to reveal the entire solution?"))&&this.broadcast(d+":"+e)},"change [name=active-mode]":function(a){f.set("inCandidateMode","candidate"===a.target.value)},"change #automatic-candidates":function(a){f.set("automaticCandidates",a.target.checked)},"click #solving-settings":function(a){this.settingsModal.modal.open(),a.stopPropagation()},"click #hint-trigger":function(){b("#game-container").hasClass("solved")?this.broadcast("reset:puzzle"):this.broadcast("show:hint")}},hideAllMenus:function(){this.$menus.removeClass("active"),this.tooltip&&(this.tooltip.destroy(),delete this.tooltip)},toggleInputMode:function(a,b){this.$("#"+(b?"candidate":"fill")+"-mode").prop("checked",!0)},toggleAutoMode:function(a,b){this.$("#automatic-candidates").prop("checked",b)}})}),define("sudoku-game/util/colors",[],function(){return{blue2:"#0858AA",blue3:"#279CFF",blue425:"#85C8FF",blue5:"#A7D8FF",blue65:"#D3E7FA;",blue7:"#DCEFFF",gray05:"#333333",gray1:"#797987",gray2:"#959595",gray45:"#CCCCCC",gray5:"#DCDCDC",gray6:"#EBEBEB",yellow1:"#FFDA00",red1:"#F23F00"}}),define("sudoku-game/view/candidate-view",["underscore/nyt","jquery/nyt","foundation/views/base-view","sudoku-game/util/colors"],function(a,b,c,d){"use strict";return c.extend({className:"candidate",initialize:function(){this.listenTo(this.model,{"change:available":this.toggle})},render:function(){return this.$el.wrap("<td>").text(this.model.get("value")),this.$el.parent()},toggle:function(a,b){return this.$el.toggleClass("available",b),this}})}),define("sudoku-game/view/candidates-view",["underscore/nyt","jquery/nyt","foundation/views/base-view","sudoku-game/view/candidate-view"],function(a,b,c,d){return c.extend({render:function(){var a,c=this;return this.collection.each(function(e,f){if(0!==f){var g=e.get("value"),h=(g-1)%3===0,i=g%3===0,j=new d({model:e});h&&(a=b("<tr>")),a.append(j.render()),i&&c.$el.append(a)}}),this}})}),define("sudoku-game/view/square-view",["underscore/nyt","jquery/nyt","foundation/views/base-view","sudoku-game/view/candidates-view","sudoku-game/model/settings-model","sudoku-game/template/compiled","sudoku-game/util/colors"],function(a,b,c,d,e,f,g){"use strict";return c.extend({tagName:"td",className:"grid-square",persistantStates:["confirmed","checked","revealed","modified"],initialize:function(){var b=this;b.listenTo(b.model,{"change:guess":b.updateGuess,"change:matchingNeighborCount":b.updateImpossibilityState}),a.each(a.union(this.persistantStates,["active"]),function(a){b.listenTo(b.model,"change:"+a,function(c,d){b.updateStateClass(a,d)})}),b.updateImpossibilityState(null,this.model.get("matchingNeighborCount")),b.subscribe("change:all-filled",this.toggleSetCompletion)},render:function(){var b=this,c=b.model;return this.$el.html(f.square(c.attributes)),c.is("immutable")?this.$el.addClass("prefilled"):new d({collection:c.get("candidates"),el:this.$(".candidates")}).render(),this.updateGuess(c,c.get("guess")),a.each(this.persistantStates,function(a){b.updateStateClass(a,b.model.is(a))}),this},events:{"click .candidate":function(a){this.model.is("active")&&this.model.toggleCandidate(a.currentTarget.innerHTML)}},updateStateClass:function(a,b){
return this.$el.toggleClass(a,b),this},updateImpossibilityState:function(a,b){this.$el.toggleClass("impossible",b>0)},updateGuess:function(a,b){this.$(".guess").text(b||""),this.$(".candidates").toggle(!b)},toggleSetCompletion:function(a,b){var c=a==this.model.get("guess")||a==this.model.previous("guess");c&&this.$el.toggleClass("complete-set",b)}})}),define("sudoku-game/view/grid-view",["underscore/nyt","jquery/nyt","foundation/views/base-view","sudoku-game/view/square-view"],function(a,b,c,d){return c.extend({className:"sudoku-grid",resume:function(){this.broadcast("nyt:resume-timer")},render:function(){for(var a=b("<table>"),c=b("<tr>"),e=this.collection,f=0,g=0;g<9;g++){for(var h=0;h<9;h++){var i=new d({model:e.at(f++)});c.append(i.render().el)}a.append(c),c=b("<tr>")}return this.$el.html(a).prepend(b('<div class="pauseOverlay"><div>Your game has been paused.<button class="paused">Resume</button></div></div><input id="focus-trap" type="number" autocorrect="off" spellcheck="false" autocomplete="off" maxlength="1" />')),this},events:{"click .cell-wrapper":function(a){this.collection.activateSquareAtIndex(b(a.currentTarget).data("index"))},"click button.paused":"resume"}})}),define("sudoku-game/view/c-column-view",["underscore/nyt","jquery/nyt","foundation/views/base-view","sudoku-game/template/compiled","foundation/models/user-data"],function(a,b,c,d,e){"use strict";return c.extend({className:"c-column",render:function(){var a="\n--\nDevice information:",b="\nBrowser: "+this.getBrowser()+" "+this.getBrowserVersion(),c="\nOS Platform: "+this.getOS(),f="\nScreen Resolution: "+window.screen.width+" x "+window.screen.height,g="\nViewport Size: "+document.documentElement.clientWidth+" x "+document.documentElement.clientHeight,h=(new Date).getTimezoneOffset(),i="\nTimezone: UTC"+(h>0?"":"+")+h/-60,j="\nUser Not Logged In";e.getUserId()>0&&(j="\nRegi: "+e.getUserId(),j+="\nXwd: "+(e.isCrosswordsSubscriber()?"Yes":"No"));var k=window.encodeURIComponent(a+b+c+f+g+i+j);return this.$el.html(d.cColumn({emailBody:k})),this},getBrowser:function(){var a,b=window.navigator.userAgent,c=b.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/nytiphone|nytipad/.test(b)?"NYT WebView":/trident/i.test(c[1])?(a=/\brv[ :]+(\d+)/g.exec(b)||[],"IE "+(a[1]||"")):"Chrome"===c[1]&&(a=b.match(/\bOPR\/(\d+)/),null!==a)?"Opera "+a[1]:(c=c[2]?[c[1],c[2]]:[window.navigator.appName,window.navigator.appVersion,"-?"],null!==(a=b.match(/version\/(\d+)/i))&&c.splice(1,1,a[1]),c[0])},getBrowserVersion:function(){var a,b=window.navigator.userAgent,c=b.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/nytiphone|nytipad/.test(b)){var d=b.match(/(nytiphone|nytipad)\/([\d\.]*)/);return d&&d[2]||""}return/trident/i.test(c[1])?(a=/\brv[ :]+(\d+)/g.exec(b)||[],"IE "+(a[1]||"")):"Chrome"===c[1]&&(a=b.match(/\bOPR\/(\d+)/),null!==a)?"Opera "+a[1]:(c=c[2]?[c[1],c[2]]:[window.navigator.appName,window.navigator.appVersion,"-?"],null!==(a=b.match(/version\/(\d+)/i))&&c.splice(1,1,a[1]),c[1])},getOS:function(){var a=window.navigator.userAgent;switch(!0){case a.indexOf("iPhone")!==-1:return"iPhone, iOS "+this.getVersion("ios");case a.indexOf("iPad")!==-1:return"iPad, iOS "+this.getVersion("ios");case a.indexOf("iPod")!==-1:return"iPod, iOS "+this.getVersion("ios");case a.indexOf("Windows Phone")!==-1:return"Windows Phone";case a.indexOf("Kindle Fire")!==-1||a.indexOf("Silk")!==-1:return"Kindle Fire";case a.indexOf("Android")!==-1:return"Android "+this.getVersion("android");case a.indexOf("Win")!==-1:return"Windows "+this.getVersion("win");case a.indexOf("Mac OS")!==-1:return"Mac OS X "+this.getVersion("mac");case a.indexOf("X11")!==-1:return"UNIX";case a.indexOf("Linux")!==-1:return"Linux";default:return"Unknown"}},getVersion:function(a){var b=window.navigator.userAgent;if("ios"===a||"mac"===a){var c=b.match(/(\d)+(_(\d)+)+/);return c&&c[0]&&c[0].replace(/_/g,".")||""}if("android"===a&&b.indexOf("Android ")>-1)return b.substr(b.indexOf("Android ")+8,3);if("win"===a)switch(!0){case b.indexOf("NT 5.")!==-1:return"XP";case b.indexOf("NT 6.0")!==-1:return"Vista";case b.indexOf("NT 6.1")!==-1:return"7";case b.indexOf("NT 6.2")!==-1:return"8";case b.indexOf("NT 6.3")!==-1:return"8.1"}return""}})}),define("sudoku-game/view/puzzle-view",["backbone/nyt","underscore/nyt","jquery/nyt","sudoku-game/model/puzzle-model","sudoku-game/model/settings-model","sudoku-game/model/timer-model","sudoku-game/util/data-adaptor","foundation/views/base-view","sudoku-game/view/header-view","sudoku-game/view/toolbar-view","sudoku-game/view/grid-view","sudoku-game/view/c-column-view"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";return h.extend({initialize:function(b){this.setUpSubscriptions();var c=b.level;if(!c){var d=e.get("defaultDifficulty");a.history.stop(),a.history.start({pushState:!0,root:"/crosswords/game/sudoku"}),this.pageManager.navigateRoute(d),c=d}this.setLevel(c),this.setUpPreferences(),this.setUpKeyListeners()},setLevel:function(a){this.model=new d(g[a]),this.listenTo(this.model,"change:solved",this.monitorSolveState),this.listenTo(f,"change:interval",this.updatePausedClass),this.render(),this.fetchAds()},fetchAds:function(){require(["shared/adlibrary/instances/dfp"],function(a){a.addPlacement({Middle5:[300,79],MiddleRight:[[300,600],[300,250]]}),a.requestAdsInViewport()})},setUpPreferences:function(){this.listenTo(e,{"change:highlightConflicts":this.toggleConflictHighlighting,"change:lightenComplete":this.toggleCompleteSetLightening}),this.toggleConflictHighlighting(e,e.is("highlightConflicts")),this.toggleCompleteSetLightening(e,e.is("lightenComplete"))},setUpKeyListeners:function(){var a=this,b=a.model,d=b.grid;c("body").on("keydown",function(b){var c,g=b.which,h=a.pageManager.KEYS,i=d.activeSquare;switch(g){case h.BACKSPACE:case h.DELETE:return f.isPaused()||i.clear(),!1;case h.SHIFT:case h.ALT:return void e.enterCandidateMode();case h.SPACE:return e.toggle("inCandidateMode"),!1;case h.LEFT:c=[0,-1];break;case h.RIGHT:c=[0,1];break;case h.UP:c=[-1,0];break;case h.DOWN:c=[1,0];break;default:(g>=49&&g<=57||g>=97&&g<=105)&&(g-=g>60?96:48,f.isPaused()||i.update(g))}if(c)return d.tryToMove(c[0],c[1]),!1}).on("keyup",function(b){var c=b.which,d=a.pageManager.KEYS;c!==d.ALT&&c!==d.SHIFT||e.exitCandidateMode()})},setUpSubscriptions:function(){this.subscribe("nyt:modal-show-congratulations-modal",this.playSound),this.subscribe("nyt:resume-timer",this.resume)},toggleConflictHighlighting:function(a,b){this.$el.toggleClass("highlight-conflicts",b)},toggleCompleteSetLightening:function(a,b){this.$el.toggleClass("lighten-complete",b)},resume:function(){f.start()},render:function(){var a=this.model,b=a.grid,d=new i({model:a}),f=new j,g=new k({collection:b}),h=c('<div class="ab-column">').append(f.render().el).append(g.render().el).append(c(".how-to-play"));return this.$el.append(d.render().el).append(h).append((new l).render().el),b.activateFirstSquare(),e.setInitialState(),this.updateSolvedClass(this.model.is("solved")),this},events:{click:function(){c("#focus-trap").focus()}},playSound:function(){e.get("soundOn")&&document.getElementById("strut").play()},updatePausedClass:function(a){this.$el.toggleClass("paused",a.isPaused())},updateSolvedClass:function(a){this.$el.toggleClass("solved",a)},monitorSolveState:function(a,b){this.updateSolvedClass(b),this.broadcast("change:solved",b),b&&this.congratulate()},congratulate:function(){var a=this,b="",c="";if(e.get("showClock")){c=" in ",b=this.$("#timer").text().trim();for(var d in b)if(/[^0:]/.test(b[d])){b=b.substring(d);break}b.indexOf(":")===-1&&(b+=" seconds")}require(["shared/modal/views/modal","sudoku-game/template/compiled"],function(d,e){var f=new d({hasCloseButton:!0,hasOverlay:!0,id:"congratulations-modal",addlClasses:"centered",tailDirection:"fixed",modalContent:e.congratsModal({useIn:c,time:b,difficulty:a.model.get("difficulty")})});f.addToPage().open()})}})}),define("sudoku-game/../../common/lib/external/lzstring/lz-string-amd",[],function(){var a={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(b){if(null==b)return"";var c,d,e,f,g,h,i,j="",k=0;for(b=a.compress(b);k<2*b.length;)k%2==0?(c=b.charCodeAt(k/2)>>8,d=255&b.charCodeAt(k/2),e=k/2+1<b.length?b.charCodeAt(k/2+1)>>8:NaN):(c=255&b.charCodeAt((k-1)/2),(k+1)/2<b.length?(d=b.charCodeAt((k+1)/2)>>8,e=255&b.charCodeAt((k+1)/2)):d=e=NaN),k+=3,f=c>>2,g=(3&c)<<4|d>>4,h=(15&d)<<2|e>>6,i=63&e,isNaN(d)?h=i=64:isNaN(e)&&(i=64),j=j+a._keyStr.charAt(f)+a._keyStr.charAt(g)+a._keyStr.charAt(h)+a._keyStr.charAt(i);return j},decompressFromBase64:function(b){if(null==b)return"";var c,d,e,f,g,h,i,j,k="",l=0,m=0,n=a._f;for(b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");m<b.length;)g=a._keyStr.indexOf(b.charAt(m++)),h=a._keyStr.indexOf(b.charAt(m++)),i=a._keyStr.indexOf(b.charAt(m++)),j=a._keyStr.indexOf(b.charAt(m++)),d=g<<2|h>>4,e=(15&h)<<4|i>>2,f=(3&i)<<6|j,l%2==0?(c=d<<8,64!=i&&(k+=n(c|e)),64!=j&&(c=f<<8)):(k+=n(c|d),64!=i&&(c=e<<8),64!=j&&(k+=n(c|f))),l+=3;return a.decompress(k)},compressToUTF16:function(b){if(null==b)return"";var c,d,e,f="",g=0,h=a._f;for(b=a.compress(b),c=0;c<b.length;c++)switch(d=b.charCodeAt(c),g++){case 0:f+=h((d>>1)+32),e=(1&d)<<14;break;case 1:f+=h(e+(d>>2)+32),e=(3&d)<<13;break;case 2:f+=h(e+(d>>3)+32),e=(7&d)<<12;break;case 3:f+=h(e+(d>>4)+32),e=(15&d)<<11;break;case 4:f+=h(e+(d>>5)+32),e=(31&d)<<10;break;case 5:f+=h(e+(d>>6)+32),e=(63&d)<<9;break;case 6:f+=h(e+(d>>7)+32),e=(127&d)<<8;break;case 7:f+=h(e+(d>>8)+32),e=(255&d)<<7;break;case 8:f+=h(e+(d>>9)+32),e=(511&d)<<6;break;case 9:f+=h(e+(d>>10)+32),e=(1023&d)<<5;break;case 10:f+=h(e+(d>>11)+32),e=(2047&d)<<4;break;case 11:f+=h(e+(d>>12)+32),e=(4095&d)<<3;break;case 12:f+=h(e+(d>>13)+32),e=(8191&d)<<2;break;case 13:f+=h(e+(d>>14)+32),e=(16383&d)<<1;break;case 14:f+=h(e+(d>>15)+32,(32767&d)+32),g=0}return f+h(e+32)},decompressFromUTF16:function(b){if(null==b)return"";for(var c,d,e="",f=0,g=0,h=a._f;g<b.length;){switch(d=b.charCodeAt(g)-32,f++){case 0:c=d<<1;break;case 1:e+=h(c|d>>14),c=(16383&d)<<2;break;case 2:e+=h(c|d>>13),c=(8191&d)<<3;break;case 3:e+=h(c|d>>12),c=(4095&d)<<4;break;case 4:e+=h(c|d>>11),c=(2047&d)<<5;break;case 5:e+=h(c|d>>10),c=(1023&d)<<6;break;case 6:e+=h(c|d>>9),c=(511&d)<<7;break;case 7:e+=h(c|d>>8),c=(255&d)<<8;break;case 8:e+=h(c|d>>7),c=(127&d)<<9;break;case 9:e+=h(c|d>>6),c=(63&d)<<10;break;case 10:e+=h(c|d>>5),c=(31&d)<<11;break;case 11:e+=h(c|d>>4),c=(15&d)<<12;break;case 12:e+=h(c|d>>3),c=(7&d)<<13;break;case 13:e+=h(c|d>>2),c=(3&d)<<14;break;case 14:e+=h(c|d>>1),c=(1&d)<<15;break;case 15:e+=h(c|d),f=0}g++}return a.decompress(e)},compress:function(b){if(null==b)return"";var c,d,e,f={},g={},h="",i="",j="",k=2,l=3,m=2,n="",o=0,p=0,q=a._f;for(e=0;e<b.length;e+=1)if(h=b.charAt(e),Object.prototype.hasOwnProperty.call(f,h)||(f[h]=l++,g[h]=!0),i=j+h,Object.prototype.hasOwnProperty.call(f,i))j=i;else{if(Object.prototype.hasOwnProperty.call(g,j)){if(j.charCodeAt(0)<256){for(c=0;c<m;c++)o<<=1,15==p?(p=0,n+=q(o),o=0):p++;for(d=j.charCodeAt(0),c=0;c<8;c++)o=o<<1|1&d,15==p?(p=0,n+=q(o),o=0):p++,d>>=1}else{for(d=1,c=0;c<m;c++)o=o<<1|d,15==p?(p=0,n+=q(o),o=0):p++,d=0;for(d=j.charCodeAt(0),c=0;c<16;c++)o=o<<1|1&d,15==p?(p=0,n+=q(o),o=0):p++,d>>=1}k--,0==k&&(k=Math.pow(2,m),m++),delete g[j]}else for(d=f[j],c=0;c<m;c++)o=o<<1|1&d,15==p?(p=0,n+=q(o),o=0):p++,d>>=1;k--,0==k&&(k=Math.pow(2,m),m++),f[i]=l++,j=String(h)}if(""!==j){if(Object.prototype.hasOwnProperty.call(g,j)){if(j.charCodeAt(0)<256){for(c=0;c<m;c++)o<<=1,15==p?(p=0,n+=q(o),o=0):p++;for(d=j.charCodeAt(0),c=0;c<8;c++)o=o<<1|1&d,15==p?(p=0,n+=q(o),o=0):p++,d>>=1}else{for(d=1,c=0;c<m;c++)o=o<<1|d,15==p?(p=0,n+=q(o),o=0):p++,d=0;for(d=j.charCodeAt(0),c=0;c<16;c++)o=o<<1|1&d,15==p?(p=0,n+=q(o),o=0):p++,d>>=1}k--,0==k&&(k=Math.pow(2,m),m++),delete g[j]}else for(d=f[j],c=0;c<m;c++)o=o<<1|1&d,15==p?(p=0,n+=q(o),o=0):p++,d>>=1;k--,0==k&&(k=Math.pow(2,m),m++)}for(d=2,c=0;c<m;c++)o=o<<1|1&d,15==p?(p=0,n+=q(o),o=0):p++,d>>=1;for(;;){if(o<<=1,15==p){n+=q(o);break}p++}return n},decompress:function(b){if(null==b)return"";if(""==b)return null;var c,d,e,f,g,h,i,j,k=[],l=4,m=4,n=3,o="",p="",q=a._f,r={string:b,val:b.charCodeAt(0),position:32768,index:1};for(d=0;d<3;d+=1)k[d]=d;for(f=0,h=Math.pow(2,2),i=1;i!=h;)g=r.val&r.position,r.position>>=1,0==r.position&&(r.position=32768,r.val=r.string.charCodeAt(r.index++)),f|=(g>0?1:0)*i,i<<=1;switch(c=f){case 0:for(f=0,h=Math.pow(2,8),i=1;i!=h;)g=r.val&r.position,r.position>>=1,0==r.position&&(r.position=32768,r.val=r.string.charCodeAt(r.index++)),f|=(g>0?1:0)*i,i<<=1;j=q(f);break;case 1:for(f=0,h=Math.pow(2,16),i=1;i!=h;)g=r.val&r.position,r.position>>=1,0==r.position&&(r.position=32768,r.val=r.string.charCodeAt(r.index++)),f|=(g>0?1:0)*i,i<<=1;j=q(f);break;case 2:return""}for(k[3]=j,e=p=j;;){if(r.index>r.string.length)return"";for(f=0,h=Math.pow(2,n),i=1;i!=h;)g=r.val&r.position,r.position>>=1,0==r.position&&(r.position=32768,r.val=r.string.charCodeAt(r.index++)),f|=(g>0?1:0)*i,i<<=1;switch(j=f){case 0:for(f=0,h=Math.pow(2,8),i=1;i!=h;)g=r.val&r.position,r.position>>=1,0==r.position&&(r.position=32768,r.val=r.string.charCodeAt(r.index++)),f|=(g>0?1:0)*i,i<<=1;k[m++]=q(f),j=m-1,l--;break;case 1:for(f=0,h=Math.pow(2,16),i=1;i!=h;)g=r.val&r.position,r.position>>=1,0==r.position&&(r.position=32768,r.val=r.string.charCodeAt(r.index++)),f|=(g>0?1:0)*i,i<<=1;k[m++]=q(f),j=m-1,l--;break;case 2:return p}if(0==l&&(l=Math.pow(2,n),n++),k[j])o=k[j];else{if(j!==m)return null;o=e+e.charAt(0)}p+=o,k[m++]=e+o.charAt(0),l--,e=o,0==l&&(l=Math.pow(2,n),n++)}}};return a}),define("sudoku-game/util/config",["underscore/nyt","foundation/models/base-model","foundation/models/page-storage","foundation/views/page-manager","sudoku-game/../../common/lib/external/lzstring/lz-string-amd"],function(a,b,c,d,e){a.extend(b.prototype,{toggle:function(b,c){return c=c?a.clone(c):{},this.set(b,!this.get(b),c)},is:function(a,b){return!!this.get(a,b)},increment:function(a){return this.set(a,this.get(a)+1)},decrement:function(a){return this.set(a,this.get(a)-1)}}),a.extend(c,{pack:function(a,b){var c=JSON.stringify(b),d=e.compressToUTF16(c);return this.set(a,d)},unpack:function(a){try{var b=this.get(a),c=e.decompressFromUTF16(b),d=JSON.parse(c);return d}catch(f){return null}}}),a.extend(d.KEYS,{BACKSPACE:8,SHIFT:16,CTRL:17,ALT:18,DELETE:46})}),require.config({}),require(["underscore/nyt","jquery/nyt","foundation/cookies","sudoku-game/view/puzzle-view","sudoku-game/util/data-adaptor","sudoku-game/util/config"],function(a,b,c,d,e){"use strict";function f(){function a(){require(["sudoku-game/template/compiled"],function(a){b("#game-container").replaceWith(a.error())})}function c(){var a=window.location.pathname,b=a.match(/easy|medium|hard/i);return b?b[0]:null}var f,g;try{f=window.atob(window.preload),g=JSON.parse(f)}catch(h){return a()}e.adapt(g),new d({level:c(),el:b("#game-container")})}f(),window.NYT_DBGS=c.readCookie("NYT-DBGS")}),define("sudoku-game/main",function(){});